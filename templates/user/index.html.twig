{% extends 'base.html.twig' %}

  {% block head %}
    <title>{% block title %}URHAJ Normandie | Liste des utilisateurs{% endblock %}</title>
    {% block icon %}<link rel='icon' href='/img/icone.ico'>{% endblock %}
  {% endblock %}

{% block body %}
        <link rel="stylesheet" href="/css/add-admin.css">
         <link rel="stylesheet" href="/css/index-bdd.css">
        <style>

            html {
                height : auto;
                width : auto;
            }

            body {
                margin : 50px;
            }

            .grid-container {
                display: grid;
                grid-template-columns: repeat(4, 1fr); /* 2 colonnes avec largeur égale */
                grid-gap: 10px; /* Espacement entre les éléments */
            }

            .card {
            width: 300px;
            height: 310px;
            background: rgb(38, 38, 38);
            box-shadow: 7px 5px 10px rgba(0, 0, 0, 0.333);
            }
            .cardparam {
            display: flex;
            flex-direction: column;
            align-items: center;
            }
            .imge {
            height: 70px;
            background-color: #ff5858;
            }

            .imge .Usericon {
            background-color: #414141;
            transform: translateX(10px) translateY(10px);
            width: 50px;
            height: 50px;
            border-radius: 10px;
            }

            .imge .UserName {
            
            width: 190px;
            height: 15px;
            border-width: 10px;
            border-radius: 5px;
            border-color: #262626;
            color: #262626;
            font-size: 15px;
            font-weight: bold;
            transform: translateX(70px) translateY(-35px);
            }

            .imge .Id {
            width: 220px;
            height: 10px;
            border-width: 10px;
            border-radius: 5px;
            border-color: #262626;
            color: #262626;
            font-size: 10px;
            font-weight: bold;
            transform: translateX(70px) translateY(-25px);
            }

            .Description {
            border-color: #141414;
            
            transform: translate(5px, 6px);
            width: 250px;
            height: 130px;
            border-radius: 5px;
            }

            /*______Social Media______*/
            .social-media:before {
            content: " ";
            display: block;
            width: 100%;
            height: 2px;
            transform: translatey(10px);
            background: #414141;
            }

            .social-media a {
            margin-right: 50px;
            text-decoration: none;
            color: inherit;
            }

            .social-media a:last-child {
            margin-right: 0;
            }

            .social-media a svg {
            color: #ff5858;
            transform: translatex(25px) translateY(20px);
            width: 20px;
            fill: currentColor;
            }

            .buttondelete {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: rgb(20, 20, 20);
            border: none;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.164);
            cursor: pointer;
            transition-duration: .3s;
            overflow: hidden;
            position: relative;
            }

            .svgIcon {
            width: 12px;
            transition-duration: .3s;
            }

            .svgIcon path {
            fill: white;
            }

            .buttondelete:hover {
            width: 140px;
            border-radius: 50px;
            transition-duration: .3s;
            background-color: rgb(255, 69, 69);
            align-items: center;
            }

            .buttondelete:hover .svgIcon {
            width: 50px;
            transition-duration: .3s;
            transform: translateY(60%);
            }

            .buttondelete::before {
            position: absolute;
            top: -20px;
            content: "Supprimer";
            color: white;
            transition-duration: .3s;
            font-size: 2px;
            }

            .buttondelete:hover::before {
            font-size: 13px;
            opacity: 1;
            transform: translateY(30px);
            transition-duration: .3s;
            }


            .confirmdel {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            padding: 15px 20px;
            background-color: #212121;
            border: none;
            font: inherit;
            color: #e8e8e8;
            font-size: 20px;
            font-weight: 600;
            border-radius: 50px;
            cursor: not-allowed;
            overflow: hidden;
            transition: all 0.3s ease cubic-bezier(0.23, 1, 0.320, 1);
            }

            .confirmdel span {
            position: relative;
            z-index: 2;
            display: flex;
            align-items: center;
            }

            .confirmdel::before {
            position: absolute;
            content: '';
            width: 100%;
            height: 100%;
            translate: 0 105%;
            background-color: #F53844;
            transition: all 0.3s cubic-bezier(0.23, 1, 0.320, 1);
            }

            .confirmdel svg {
            width: 32px;
            height: 32px;
            fill: #F53844;
            transition: all 0.3s cubic-bezier(0.23, 1, 0.320, 1);
            }

            .confirmdel:hover {
            animation: shake 0.2s linear 1;
            }

            .confirmdel:hover::before {
            translate: 0 0;
            }

            .confirmdel:hover svg {
            fill: #e8e8e8;
            }

            @keyframes shake {
            0% {
                rotate: 0deg;
            }

            33% {
                rotate: 10deg;
            }

            66% {
                rotate: -10deg;
            }

            100% {
                rotate: 10deg;
            }
            }

            .beautiful-button {
            position: relative;
            display: inline-block;
            background: linear-gradient(169deg, rgba(6,151,153,1) 0%, rgba(63,112,0,1) 100%);
            /* Gradient background */
            color: white;
            /* White text color */
            font-family: "Segoe UI", sans-serif;
            /* Stylish and legible font */
            font-weight: bold;
            font-size: 18px;
            /* Large font size */
            border: none;
            /* No border */
            border-radius: 30px;
            /* Rounded corners */
            padding: 18px 29px;
            /* Large padding */
            cursor: pointer;
            /* Cursor on hover */
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            /* Subtle shadow */
            animation: button-shimmer 2s infinite;
            transition: all 0.3s ease-in-out;
            /* Smooth transition */
            }

            /* Hover animation */
            .beautiful-button:hover {
            background: linear-gradient(332deg, rgba(6,151,153,1) 0%, rgba(63,112,0,1) 100%);
            animation: button-particles 1s ease-in-out infinite;
            transform: translateY(-2px);
            }

            /* Click animation */
            .beautiful-button:active {
            transform: scale(0.95);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            }

            /* Shimmer animation */
            @keyframes button-shimmer {
            0% {
                background-position: left top;
            }

            100% {
                background-position: right bottom;
            }
            }

            /* Particle animation */
            @keyframes button-particles {
            0% {
                background-position: left top;
            }

            100% {
                background-position: right bottom;
            }
            }

        </style>
            <br><br><br><br><br><br><br>
    <div align='center'>
        <button type="button" class="buttonadd" onclick="window.location.href = '{{ path('app_user_new') }}';">
            <span class="buttonadd__text">Utilisateur</span>
            <span class="buttonadd__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" viewBox="0 0 24 24" stroke-width="2" stroke-linejoin="round" stroke-linecap="round" stroke="currentColor" height="24" fill="none" class="svg"><line y2="19" y1="5" x2="12" x1="12"></line><line y2="12" y1="12" x2="19" x1="5"></line></svg></span>
        </button>
    </div>
    <br>
    <div class="grid-container">
        {% for user in users %}
            <div class="card">
                <div class="imge">
                    <div class="Usericon"><img src="/uploads/images/{{ user.profileImage}}" style="width: 100%; height: 100%; object-fit: cover;"> </div>
                    <p class="UserName">{{ user.email }}</p>
                    <p class="Id">{{ user.roles ? user.roles|json_encode : '' }}</p>
                </div>

                <div class="Description" style="color : white">
                    Description :<br>{{ user.description }}
                </div>

                <div class="social-media">
                    <a target='_blank' href="{{ user.twitter}}">
                        <svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
                            <path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path>
                        </svg>
                    </a>
                    <a target='_blank' href="{{ user.instagram }}">
                        <svg viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg">
                            <path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"></path>
                        </svg>
                    </a>
                    <a target='_blank' href="{{ user.facebook }}">
                        <svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
                            <path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"></path>
                        </svg>
                    </a>
                    <a target='_blank' href="{{ user.linkedin }}">
                        <svg viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg">
                            <path d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"></path>
                        </svg>
                    </a>
                </div>
                <br>
                <div class='cardparam'>
                        <button class="buttondelete" data-bs-toggle="modal" data-bs-target="#staticBackdrop{{ user.id }}" ><svg viewBox="0 0 448 512" class="svgIcon"><path d="M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"></path></svg></button>
                </div>
            </div>

        {% endfor %}
        {% for user in users %}
            {#<!-- Modal -->
            <div class="modal fade" id="staticBackdrop{{ user.id }}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="staticBackdropLabel">Suppression d'utilisateur</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body" align='center'>
                            
                    </div>
                    <div class="modal-footer">
                        <button class="beautiful-button" data-bs-dismiss="modal">Annuler</button>
                        <button class="confirmdel" onclick='deleteUser{{ user.id }}'><span> Supprimer le compte</span><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-miterlimit="2" stroke-linejoin="round" fill-rule="evenodd" clip-rule="evenodd"><path fill-rule="nonzero" d="m12.002 2.005c5.518 0 9.998 4.48 9.998 9.997 0 5.518-4.48 9.998-9.998 9.998-5.517 0-9.997-4.48-9.997-9.998 0-5.517 4.48-9.997 9.997-9.997zm0 1.5c-4.69 0-8.497 3.807-8.497 8.497s3.807 8.498 8.497 8.498 8.498-3.808 8.498-8.498-3.808-8.497-8.498-8.497zm0 7.425 2.717-2.718c.146-.146.339-.219.531-.219.404 0 .75.325.75.75 0 .193-.073.384-.219.531l-2.717 2.717 2.727 2.728c.147.147.22.339.22.531 0 .427-.349.75-.75.75-.192 0-.384-.073-.53-.219l-2.729-2.728-2.728 2.728c-.146.146-.338.219-.53.219-.401 0-.751-.323-.751-.75 0-.192.073-.384.22-.531l2.728-2.728-2.722-2.722c-.146-.147-.219-.338-.219-.531 0-.425.346-.749.75-.749.192 0 .385.073.531.219z"></path></svg></span></button>
                    </div>
                </div>
            </div>#}

            <!-- Modal -->
            <div class="modal fade" id="staticBackdrop{{ user.id }}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="staticBackdropLabel">Suppression d'utilisateur</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        Êtes-vous sûr de vouloir supprimer le compte de : <b>{{ user.name }}</b><br>
                        Ayant pour addresse mail : <b>{{ user.email }}</b><br><br>
                        Cette action est irréversible. En validant la suppression de l'utilisateur, vous prennez les responsabilités qui en incombe.<br><br>
                        <u>Le développeur du site se décharge de toute responsabilités lié à cette suppression.</u>
                    </div>
                    <div class="modal-footer">
                        <button class="beautiful-button" data-bs-dismiss="modal">Annuler</button>
                        {{ include('user/_delete_form.html.twig') }}
                    </div>
                    </div>
                </div>

            </div>
            <script>
                function deleteUser{{ user.id }}() {
                    window.location.href = "{{ path('app_user_delete', {'id': user.id}) }}"; // Remplacez l'URL par celle de votre choix
                }
            </script>
        {% endfor %}

        <script>
            // Récupérer tous les boutons avec la classe "delete-button"
            const deleteButtons = document.querySelectorAll('.delete-button');

            // Ajouter un gestionnaire d'événements à chaque bouton
            deleteButtons.forEach((button) => {
            button.addEventListener('click', () => {
                // Récupérer l'identifiant de l'utilisateur depuis l'attribut "data-id"
                const userId = button.getAttribute('data-id');

                // Construire l'URL de redirection
                const url = "{{ path('app_user_delete', {'id': 'userId'}) }}".replace('userId', userId);

                // Rediriger vers l'URL
                window.location.href = url;
            });
            });
        </script>
    </div>

{% endblock %}
